import{a as G}from"./chunk-5VA4Y6PK.js";import{a as H}from"./chunk-TW3OO4I6.js";import{b as x,e as W,i as Y,j as q}from"./chunk-5M3UT6VB.js";import{c as M,j as S,k as V}from"./chunk-NLJGBAOU.js";import{Aa as D,Cb as g,D as P,Ia as O,Ja as T,Ka as k,Ma as L,Na as $,Oa as p,P as y,Pa as a,Pb as A,Qa as n,R as w,Ra as h,S as E,Wa as J,Ya as N,Za as d,cc as z,eb as j,fc as U,g as b,ib as s,kb as l,la as r,lb as F,m as f,tb as v,u as I,v as C,vb as _,wa as R,xb as u,yb as B}from"./chunk-PYDYA4YI.js";var Q=(i,e)=>[i,e];function Z(i,e){if(i&1){let t=J();a(0,"div",5)(1,"div",8)(2,"div",9),s(3),_(4,"date"),n(),a(5,"div",10),s(6),_(7,"date"),_(8,"date"),n()(),a(9,"jt-ui-icon-button",11),N("click",function(){let m=w(t).$implicit,c=d();return E(c.deleteShift(m))}),n()()}if(i&2){let t=e.$implicit,o=d();r(),p("routerLink",v(13,Q,o._editShiftRoute(),t.shiftId)),r(2),l(" ",u(4,4,t.date,"EEE. MMM d")," "),r(3),F(" ",u(7,7,t.startTime,"shortTime")," \u2014 ",u(8,10,t.endTime,"shortTime")," ")}}function ee(i,e){i&1&&(a(0,"h1"),s(1,"No Soup for you !!!!"),n())}function te(i,e){if(i&1&&O(0,ee,2,0,"h1"),i&2){let t=d();T(!t._loading()&&!t._errorMsg()?0:-1)}}function ie(i,e){if(i&1&&s(0),i&2){let t=d();l(" ",t._title(),`
`)}}var K=class i{_employeeIoService=y(W);_actRoute=y(z);_editShiftRoute=g(()=>`/${S.route("edit-shift")}`);_addShiftRoute=g(()=>`/${S.route("add-shift")}`);_employeeId$=this._actRoute.paramMap.pipe(f(e=>e.get(S.EMPLOYEE_ID_PARAM)??void 0),C(e=>!!e));_employeeId=M(this._employeeId$);_employeeState=x.CreateWithObservableInput(this._employeeId$,e=>this._employeeIoService.getById(e));_shiftsState=x.CreateWithObservableInput(this._employeeId$,e=>this._employeeIoService.getUpcomingShifts(e));_shift$=new b;deleteShift=e=>this._shift$.next(e);_deleteShiftState=x.CreateWithObservableInput(this._shift$,e=>this._employeeIoService.removeShift(e.employeeId,e.shiftId)).setSuccessMsgFn(()=>"Shift deleted successfully!");_notificationStates=H.Combine(this._employeeState,this._shiftsState,this._deleteShiftState);_employee=this._employeeState.data;_title=g(()=>`Shifts - ${this._employee()?.name}`);_successMsg=this._notificationStates.successMsg;_errorMsg=this._notificationStates.errorMsg;_loading=this._notificationStates.loading;_shifts$=I(this._shiftsState.data$.pipe(f(e=>({type:"base",payload:e}))),this._deleteShiftState.data$.pipe(f(e=>({type:"delete",id:e.id})))).pipe(P((e,t)=>{if(!t)return e;switch(t.type){case"base":return[...t.payload];case"delete":return e.filter(o=>String(o.shiftId)!==String(t.id));default:return e}},[]));_shifts=M(this._shifts$);static \u0275fac=function(t){return new(t||i)};static \u0275cmp=R({type:i,selectors:[["jt-shift-list"]],decls:16,vars:12,consts:[["titleTemplate",""],[1,"header"],[1,"week"],["jtTooltip","Add Shift","theme","primary",3,"routerLink","iconName"],[1,"shifts"],[1,"shift-card"],[3,"isLoading","errorMsg","successMsg"],["name","title",3,"portalTemplate"],[1,"shift-summary",3,"routerLink"],[1,"shift-date"],[1,"shift-times"],["iconName","delete","theme","error",3,"click"]],template:function(t,o){if(t&1&&(a(0,"div",1)(1,"h2"),s(2),n()(),a(3,"div",1)(4,"div",2)(5,"h2"),s(6),n(),h(7,"jt-ui-icon-button",3),n()(),a(8,"div",4),L(9,Z,10,16,"div",5,k,!1,te,1,1),n(),h(12,"jt-notifications-modal",6),D(13,ie,1,1,"ng-template",null,0,B),h(15,"sb-portal-input",7)),t&2){let m,c,X=j(14);r(2),l("",(m=o._employee())==null?null:m.name,"'s Shifts"),r(4),l("",(c=o._employee())==null?null:c.name,"'s Shifts"),r(),p("routerLink",v(9,Q,o._addShiftRoute(),o._employeeId()))("iconName","calendar_month"),r(2),$(o._shifts()),r(3),p("isLoading",o._loading())("errorMsg",o._errorMsg())("successMsg",o._successMsg()),r(3),p("portalTemplate",X)}},dependencies:[q,V,Y,U,G,A],styles:["[_nghost-%COMP%]{display:block;display:flex;flex-direction:column;gap:16px;align-items:center;width:100%;padding-top:100px}.header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;align-items:center;position:fixed;top:50px;width:100%;background:var(--mat-sys-surface);z-index:10}.week[_ngcontent-%COMP%]{display:flex;align-items:center}.shifts[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;width:100%;align-items:stretch;width:90%;max-width:350px}.shift-card[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:12px 16px;border-radius:12px;background:var(--mat-sys-surface, #ffffff);color:var(--mat-sys-on-surface, #111111);box-shadow:0 1px 3px #0000001f,0 4px 6px #0000000f;transition:transform .12s ease,box-shadow .18s ease;width:90%;border:var(--card-border);cursor:pointer}.shift-display[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:12px 16px;flex:1;border:var(--card-border);cursor:pointer}.shift-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 18px #0000001f}.shift-date[_ngcontent-%COMP%]{font-weight:600;color:var(--mat-sys-primary, #6200ee);font-size:1.05rem;margin-bottom:8px}.shift-times[_ngcontent-%COMP%]{font-size:.875rem}.dark-mode[_nghost-%COMP%]   .shift-card[_ngcontent-%COMP%]:hover, .dark-mode   [_nghost-%COMP%]   .shift-card[_ngcontent-%COMP%]:hover{--card-border: 1px solid var(--mat-sys-primary);--card-border: 1px solid rgba(var(--mat-sys-primary-rgb), .35)}"],changeDetection:0})};export{K as JtShiftListPage};
